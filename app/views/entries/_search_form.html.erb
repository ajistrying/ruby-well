<%= form_with url: entries_path, method: :get,
              data: { 
                turbo_frame: "search_results",
                controller: "search",
                action: "submit->search#search"
              },
              class: "space-y-4" do |f| %>
  
  <div class="flex gap-2">
    <%= f.text_field :query,
        value: params[:query],
        placeholder: "Search for Ruby topics, tutorials, podcasts...",
        class: "input input-bordered flex-1",
        data: {
          search_target: "input",
          action: "input->search#handleInput"
        },
        autocomplete: "off" %>
    
    <%= f.submit "Search", class: "btn btn-primary" %>
  </div>
  
  <!-- Advanced Filters (Hidden by default) -->
  <div class="hidden" data-search-target="advanced">
    <div class="divider"></div>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="form-control">
        <label class="label">
          <span class="label-text">Content Type</span>
        </label>
        <%= f.select :entry_type,
            options_for_select([
              ["All Types", ""],
              ["Articles", "article"],
              ["Podcasts", "podcast"],
              ["Videos", "video"]
            ], params[:entry_type]),
            {},
            class: "select select-bordered select-sm" %>
      </div>
      
      <div class="form-control">
        <label class="label">
          <span class="label-text">Source Category</span>
        </label>
        <%= f.select :feed_category,
            options_for_select([
              ["All Categories", ""],
              ["Personal Blogs", "personal"],
              ["Company Blogs", "company"],
              ["Community", "community"],
              ["Newsletters", "newsletter"],
              ["Podcasts", "podcast"]
            ], params[:feed_category]),
            {},
            class: "select select-bordered select-sm" %>
      </div>
      
      <div class="form-control">
        <label class="label">
          <span class="label-text">Date Range</span>
        </label>
        <div class="flex gap-1">
          <%= f.date_field :date_from,
              value: params[:date_from],
              class: "input input-bordered input-sm flex-1" %>
          <span class="self-center">to</span>
          <%= f.date_field :date_to,
              value: params[:date_to],
              class: "input input-bordered input-sm flex-1" %>
        </div>
      </div>
    </div>
    
    <div class="flex justify-end gap-2 mt-4">
      <%= link_to "Clear Filters", entries_path, 
          class: "btn btn-ghost btn-sm",
          data: { turbo_frame: "_top" } %>
    </div>
  </div>
<% end %>